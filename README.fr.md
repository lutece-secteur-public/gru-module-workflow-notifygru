![](https://dev.lutece.paris.fr/jenkins/buildStatus/icon?job=gru-module-workflow-notifygru-deploy)
[![Alerte](https://dev.lutece.paris.fr/sonar/api/project_badges/measure?project=fr.paris.lutece.plugins%3Amodule-workflow-notifygru&metric=alert_status)](https://dev.lutece.paris.fr/sonar/dashboard?id=fr.paris.lutece.plugins%3Amodule-workflow-notifygru)
[![Line of code](https://dev.lutece.paris.fr/sonar/api/project_badges/measure?project=fr.paris.lutece.plugins%3Amodule-workflow-notifygru&metric=ncloc)](https://dev.lutece.paris.fr/sonar/dashboard?id=fr.paris.lutece.plugins%3Amodule-workflow-notifygru)
[![Coverage](https://dev.lutece.paris.fr/sonar/api/project_badges/measure?project=fr.paris.lutece.plugins%3Amodule-workflow-notifygru&metric=coverage)](https://dev.lutece.paris.fr/sonar/dashboard?id=fr.paris.lutece.plugins%3Amodule-workflow-notifygru)

# Module workflow NotifyGru 

## Introduction
Le module NotifyGru est une tâche de workflow qui construit une notification à partir d’une ressource et l’envoie. La notification peut être de type Mail, JSON...
## Configuration

NotifyGru nécessite la bibliothèque library-notifygru pour envoyer la notification.

Cette bibliothèque fournit des "Notifiers" qui correspondent à chaque type de notification (mail, sms, ...)

Les "notifiers" doivent être injectés en tant que beans dans le contexte du module pour être utilisés : consultez le dépôt library-notifygru pour plus de détails sur cette configuration.



NotifyGru peut utiliser des fournisseurs d’informations supplémentaires à inclure dans le contenu de la notification.

Ces fournisseurs sont fournis par les différents types de ressources de workflow qui peuvent utiliser cette tâche de notification (formulaires, rendez-vous, ...)

Il existe deux types de fournisseurs de ressources :


 
*  **Les fournisseurs de ressources :** 

Un fournisseur de ressources est le lien entre la tâche NotifyGru et un ensemble simple d’informations de ressource du workflow.
*  **Les gestionnaires de fournisseurs de ressources :** 

Un gestionnaire de fournisseurs de ressources est le lien entre la tâche NotifyGru et plusieurs ensembles d’informations de ressources (par exemple, dans le plugin forms, chaque formulaire correspond à un fournisseur.)




Les ressources sont traitées comme des "demandes", qui contiennent des informations telles que l’identifiant, le type, la référence utilisateur, etc... Ainsi, toutes les notifications correspondant à la même ressource seront rattachées à cette entité "demande".

## Utilisation

 **La configuration de NotifyGru se fait en deux étapes :** 
 **Une première page avec deux champs :** 
 
* Une liste pour choisir le fournisseur de ressources parmi les différentes implémentations disponibles des fournisseurs
* La case à cocher d’état : la demande sera considérée comme "fermée" si elle est cochée.

Ensuite, la configuration de NotifyGru se fait sur plusieurs onglets. Pour configurer un onglet, vous devez l’activer via le champ de sélection "Ajouter une notification...".(Seuls les types de notifications disponibles sont proposés, en fonction des types de Notifiers injectés) Pour chaque onglet, vous pouvez utiliser les signets du fournisseur de ressources pour enrichir dynamiquement le message ou le sujet.
 **Onglet Tableau de bord :** 
 
* Statut (obligatoire) : nouveau statut de la demande
* Nom de l’expéditeur (obligatoire) : l’expéditeur du message
* Sujet (obligatoire) : sujet de la notification (peut utiliser des signets)
* Message (obligatoire) : contenu de la notification (peut utiliser des signets)
* Nombre d’étapes (optionnel) : nombre total d’étapes de la demande
* Étape courante (optionnel) : étape actuelle lors de l’envoi de la notification


 **Onglet Vue Agent 360° :** 
 
* Statut dans la vue 360° (obligatoire) : statut affiché dans la vue 360°
* Description de l’événement dans la vue 360° (obligatoire) : message affiché dans la vue 360°. (peut utiliser des signets)


 **Onglet MAIL :** 
 
* Expéditeur (obligatoire) : adresse e-mail de l’expéditeur
* Sujet (obligatoire) : sujet de l’e-mail (peut utiliser des signets)
* Cc (optionnel) : en copie
* Bcc (optionnel) : copie cachée
* Message (obligatoire) : contenu de l’e-mail (peut utiliser des signets)


 **Onglet SMS :** 
 
* Message (obligatoire) : contenu du SMS (peut utiliser des signets)


 **Onglet Liste de diffusion :** 
 
* Liste de diffusion (obligatoire) : liste des destinataires, séparés par ";"
* Expéditeur (obligatoire) : adresse e-mail de l’expéditeur
* Sujet (obligatoire) : sujet (peut utiliser des signets)
* Cc (optionnel) : en copie
* Bcc (optionnel) : copie cachée
* Message (obligatoire) : contenu principal (peut utiliser des signets)




[Maven documentation and reports](https://dev.lutece.paris.fr/plugins/module-workflow-notifygru/)



 *generated by [xdoc2md](https://github.com/lutece-platform/tools-maven-xdoc2md-plugin) - do not edit directly.*